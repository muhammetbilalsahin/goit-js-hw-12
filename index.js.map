{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50349576-73448956e16d67ea550d7c551';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst perPage = 40;\n\nexport async function fetchImages(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst ul = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.loading-button');\n\nlet lightbox = new SimpleLightbox('.image-li a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet loadMoreCallback = null;\n\nexport function renderGallery(images) {\n  const appendHtml = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"image-li\">\n           <a href=\"${largeImageURL}\"> \n             <img class=\"li-img\" src=\"${webformatURL}\" alt=\"${tags\n          .split(',')\n          .slice(0, 3)\n          .join(',')}\" /> \n           </a>\n          <div class=\"div-upper\">\n            <ul>\n              <li><div class=\"div-inner\"><b>Likes</b> ${likes}</div></li>\n              \n              <li><div class=\"div-inner\"><b>Views</b> ${views}</div></li>\n              <li><div class=\"div-inner\"><b>Comments</b> ${comments}</div></li>\n              <li><div class=\"div-inner\"><b>Downloads</b> ${downloads}</div></li>\n            </ul>\n          </div>\n        </li>`;\n      }\n    )\n    .join('');\n\n  ul.insertAdjacentHTML('beforeend', appendHtml);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  ul.innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.hidden-loader').style.display = 'flex';\n}\n\nexport function hideLoader() {\n  document.querySelector('.hidden-loader').style.display = 'none';\n}\n\nloadMoreButton.addEventListener('click', () => {\n  if (typeof loadMoreCallback === 'function') {\n    disableLoadMore(); // butonu geçici devre dışı bırak\n    loadMoreCallback();\n  }\n});\n\nexport function setLoadMoreHandler(callback) {\n  loadMoreCallback = callback;\n}\n\nexport function showLoadMore() {\n  loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadMore() {\n  loadMoreButton.style.display = 'none';\n}\n\nexport function disableLoadMore() {\n  loadMoreButton.disabled = true;\n}\n\nexport function enableLoadMore() {\n  loadMoreButton.disabled = false;\n}\n","import './css/styles.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iziToast from 'izitoast';\nimport { fetchImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  setLoadMoreHandler,\n  showLoadMore,\n  hideLoadMore,\n  disableLoadMore,\n  enableLoadMore,\n} from './js/render-functions.js';\n\nlet query = '';\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('#search-form');\n\n  hideLoadMore();\n\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    query = form.searchQuery.value.trim();\n    if (!query) return;\n\n    page = 1;\n    clearGallery();\n    hideLoadMore();\n    showLoader();\n\n    try {\n      const response = await fetchImages(query, page);\n      totalHits = response.totalHits;\n\n      if (response.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      renderGallery(response.hits);\n\n      if (page * perPage < totalHits) {\n        showLoadMore();\n        enableLoadMore();\n      } else {\n        hideLoadMore();\n      }\n    } catch (error) {\n      iziToast.error({\n        message: 'Error fetching images. Please try again later.',\n        position: 'topRight',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n\n  // Load More handler\n  setLoadMoreHandler(async () => {\n    page += 1;\n    disableLoadMore();\n    showLoader();\n\n    try {\n      const response = await fetchImages(query, page);\n      renderGallery(response.hits);\n\n      if (page * perPage >= totalHits) {\n        hideLoadMore();\n      } else {\n        enableLoadMore();\n      }\n    } catch (error) {\n      iziToast.error({\n        message: 'Error loading more images.',\n        position: 'topRight',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n});\n"],"names":["API_KEY","BASE_URL","perPage","fetchImages","query","page","axios","ul","loadMoreButton","lightbox","SimpleLightbox","loadMoreCallback","renderGallery","images","appendHtml","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","disableLoadMore","setLoadMoreHandler","callback","showLoadMore","hideLoadMore","enableLoadMore","totalHits","form","e","response","iziToast"],"mappings":"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"}